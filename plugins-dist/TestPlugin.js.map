{"version":3,"sources":["../plugins/TestPlugin.ts"],"names":["TestPlugin","apply","complier","hooks","emit","tap","compilation","filelist","filename","assets","emitAsset","source","size","length","map","sourceAndMap","updateHash","buffer","Buffer","from"],"mappings":";;;;;;;AAEO,MAAMA,UAAN,CAAiB;AACpBC,EAAAA,KAAK,CAACC,QAAD,EAAqB;AACtB,UAAMC,KAAK,GAAGD,QAAQ,CAACC,KAAvB;AACAA,IAAAA,KAAK,CAACC,IAAN,CAAWC,GAAX,CAAe,aAAf,EAA+BC,WAAD,IAA8B;AACxD,UAAIC,QAAQ,GAAG,oBAAf,CADwD,CAGxD;;AACA,WAAK,IAAIC,QAAT,IAAqBF,WAAW,CAACG,MAAjC,EAAyC;AACrCF,QAAAA,QAAQ,IAAK,KAAIC,QAAS,KAA1B;AACH,OANuD,CAQxD;;;AACAF,MAAAA,WAAW,CAACI,SAAZ,CAAsB,aAAtB,EAAqC;AACjCC,QAAAA,MAAM,EAAE,MAAMJ,QADmB;AAEjCK,QAAAA,IAAI,EAAE,MAAML,QAAQ,CAACM,MAFY;AAGjCC,QAAAA,GAAG,EAAE,OAAO,EAAP,CAH4B;AAIjCC,QAAAA,YAAY,EAAE,OAAO;AACjBJ,UAAAA,MAAM,EAAEJ,QADS;AAEjBO,UAAAA,GAAG,EAAE;AAFY,SAAP,CAJmB;AAQjCE,QAAAA,UAAU,EAAE,MAAM,CAAG,CARY;AASjCC,QAAAA,MAAM,EAAE,MAAMC,MAAM,CAACC,IAAP,CAAYZ,QAAZ;AATmB,OAArC;AAWH,KApBD;AAqBH;;AAxBmB,C,CA2BxB;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA","sourcesContent":["import { Compiler, Compilation } from \"webpack\";\r\n\r\nexport class TestPlugin {\r\n    apply(complier: Compiler) {\r\n        const hooks = complier.hooks;\r\n        hooks.emit.tap('test-plugin', (compilation: Compilation) => {\r\n            let filelist = 'In this build:\\n\\n';\r\n\r\n            // 遍历所有编译过的资源文件\r\n            for (let filename in compilation.assets) {\r\n                filelist += `- ${filename} \\n`\r\n            }\r\n\r\n            // 将列表作为新的资源文件，插入到webpack构建中\r\n            compilation.emitAsset('filelist.md', {\r\n                source: () => filelist,\r\n                size: () => filelist.length,\r\n                map: () => ({}),\r\n                sourceAndMap: () => ({\r\n                    source: filelist,\r\n                    map: {}\r\n                }),\r\n                updateHash: () => { },\r\n                buffer: () => Buffer.from(filelist)\r\n            })\r\n        })\r\n    }\r\n}\r\n\r\n// class TestPlugin {\r\n//     apply(complier) {\r\n//         const hooks = complier.hooks;\r\n//         hooks.emit.tap('test-plugin', compilation => {\r\n//             let filelist = 'In this build:\\n\\n';\r\n\r\n//             // 遍历所有编译过的资源文件\r\n//             for(let filename in compilation.assets) {\r\n//                 filelist += `- ${filename} \\n`\r\n//             }\r\n\r\n//             // 将列表作为新的资源文件，插入到webpack构建中\r\n//             compilation.assets['filelist.md'] = {\r\n//                 source: () => filelist,\r\n//                 size: () => filelist.length\r\n//             }\r\n//         })\r\n//     }\r\n// }\r\n\r\n// module.exports = TestPlugin"],"file":"TestPlugin.js"}